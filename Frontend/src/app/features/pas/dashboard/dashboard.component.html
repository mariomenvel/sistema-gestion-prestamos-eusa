<!-- Dashboard PAS -->
<div class="dashboard">

  <!-- Título principal -->
  <h1 class="dashboard-title">Dashboard</h1>

  <!-- Cards de métricas -->
  <div class="metrics-cards">
    
    <!-- Card: Solicitudes Pendientes -->
    <div class="metric-card">
      <div class="metric-number number-orange">{{ solicitudesPendientes }}</div>
      <div class="metric-label">Solicitudes Pendientes</div>
    </div>

    <!-- Card: Préstamos Activos -->
    <div class="metric-card">
      <div class="metric-number number-green">{{ prestamosActivos }}</div>
      <div class="metric-label">Préstamos Activos</div>
    </div>

    <!-- Card: Devoluciones Hoy -->
    <div class="metric-card">
      <div class="metric-number number-blue">{{ devolucionesHoy }}</div>
      <div class="metric-label">Devoluciones Hoy</div>
    </div>

    <!-- Card: Materiales en Uso -->
    <div class="metric-card">
      <div class="metric-number number-purple">{{ materialesEnUso }}</div>
      <div class="metric-label">Materiales en Uso</div>
    </div>

  </div>

  <!-- Sección de solicitudes pendientes -->
  <div class="prestamos-section">
    
    <!-- Título de sección -->
    <h2 class="section-title">Solicitudes Pendientes</h2>

    <!-- Tabla de solicitudes -->
    <div class="prestamos-table">
      
      <!-- Header de la tabla -->
      <div class="table-header">
        <div class="th th-alumno">Alumno</div>
        <div class="th th-material">Material</div>
        <div class="th th-tipo">Tipo</div>
        <div class="th th-fecha-solicitud">Fecha Solicitud</div>
        <div class="th th-estado">Estado</div>
      </div>

      <!-- Body de la tabla -->
      <div class="table-body">
        
        <!-- Loading -->
        <div class="empty-state" *ngIf="isLoadingSolicitudes">
          <p>Cargando solicitudes...</p>
        </div>

        <!-- Error -->
        <div class="empty-state error" *ngIf="errorMessageSolicitudes">
          <p>{{ errorMessageSolicitudes }}</p>
        </div>

        <!-- Sin solicitudes pendientes -->
        <div class="empty-state" *ngIf="!isLoadingSolicitudes && !errorMessageSolicitudes && solicitudesPendientesData.length === 0">
          <p>✓ No hay solicitudes pendientes</p>
        </div>

        <!-- Filas de solicitudes -->
        <div 
          class="table-row" 
          *ngFor="let solicitud of solicitudesPendientesData"
        >
          <!-- Columna: Alumno -->
          <div class="td td-alumno">
            <strong>{{ getNombreAlumno(solicitud) }}</strong>
          </div>

          <!-- Columna: Material -->
          <div class="td td-material">
            <div class="material-info">
              <span>{{ getContadorMateriales(solicitud) }}</span>
            </div>
          </div>

          <!-- Columna: Tipo -->
          <div class="td td-tipo">
            {{ getTipoTexto(solicitud.tipo) }}
          </div>

          <!-- Columna: Fecha de Solicitud -->
          <div class="td td-fecha-solicitud">
            {{ formatearFecha(solicitud.creada_en) }}
          </div>

          <!-- Columna: Estado -->
          <div class="td td-estado">
            <span 
              class="badge"
              [ngClass]="getEstadoClass(solicitud.estado)"
            >
              {{ getEstadoTexto(solicitud.estado) }}
            </span>
          </div>
        </div>

      </div>

    </div>

    <!-- Botones de acción -->
    <div class="botones-accion">
      <button 
        class="btn-ver-solicitudes"
        (click)="verTodasSolicitudes()"
      >
        Ver todas las Solicitudes
      </button>

      <button 
        class="btn-prestamo-presencial"
        (click)="realizarPrestamoPresencial()"
      >
        Crear Préstamo Presencial
      </button>
    </div>

  </div>

</div>