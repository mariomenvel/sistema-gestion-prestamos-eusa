<!-- Dashboard PAS -->
<div class="dashboard">

  <!-- Título principal -->
  <h1 class="dashboard-title">Dashboard</h1>

  <!-- Cards de métricas -->
  <div class="metrics-cards">
    
    <!-- Card: Solicitudes Pendientes -->
    <div class="metric-card">
      <div class="metric-number number-orange">{{ solicitudesPendientes }}</div>
      <div class="metric-label">Solicitudes Pendientes</div>
    </div>

    <!-- Card: Préstamos Activos -->
    <div class="metric-card">
      <div class="metric-number number-green">{{ prestamosActivos }}</div>
      <div class="metric-label">Préstamos Activos</div>
    </div>

    <!-- Card: Devoluciones Hoy -->
    <div class="metric-card">
      <div class="metric-number number-blue">{{ devolucionesHoy }}</div>
      <div class="metric-label">Devoluciones Hoy</div>
    </div>

    <!-- Card: Materiales en Uso -->
    <div class="metric-card">
      <div class="metric-number number-purple">{{ materialesEnUso }}</div>
      <div class="metric-label">Materiales en Uso</div>
    </div>

  </div>

  <!-- Sección de solicitudes pendientes -->
  <div class="solicitudes-section">
    
    <!-- Título de sección -->
    <h2 class="section-title">Solicitudes Pendientes</h2>

    <!-- Tabla de solicitudes -->
    <div class="solicitudes-table">
      
      <!-- Header de la tabla -->
      <div class="table-header">
        <div class="th th-alumno">Alumno</div>
        <div class="th th-material">Material</div>
        <div class="th th-tipo">Tipo de Solicitud</div>
        <div class="th th-fecha">Fecha de Solicitud</div>
        <div class="th th-estado">Estado</div>
      </div>

      <!-- Body de la tabla -->
      <div class="table-body">
        
        <!-- Loading -->
        <div class="empty-state" *ngIf="isLoading">
          <p>Cargando solicitudes...</p>
        </div>

        <!-- Error -->
        <div class="empty-state error" *ngIf="errorMessage">
          <p>{{ errorMessage }}</p>
        </div>

        <!-- Sin solicitudes -->
        <div class="empty-state" *ngIf="!isLoading && !errorMessage && ultimasSolicitudes.length === 0">
          <p>No hay solicitudes pendientes</p>
        </div>

        <!-- Filas de solicitudes -->
        <div 
          class="table-row" 
          *ngFor="let solicitud of ultimasSolicitudes"
        >
          <!-- Columna: Alumno -->
          <div class="td td-alumno">
            {{ getNombreUsuario(solicitud) }}
          </div>

          <!-- Columna: Material -->
          <div class="td td-material">
            {{ getNombreMaterial(solicitud) }}
          </div>

          <!-- Columna: Tipo -->
          <div class="td td-tipo">
            {{ getTipoTexto(solicitud.tipo) }}
          </div>

          <!-- Columna: Fecha -->
          <div class="td td-fecha">
            {{ formatearFecha(solicitud.creada_en) }}
          </div>

          <!-- Columna: Estado -->
          <div class="td td-estado">
            <span class="badge badge-pendiente">
              Pendiente
            </span>
          </div>
        </div>

      </div>

    </div>

    <!-- Botón Ver todas las Solicitudes -->
    <button 
      class="btn-ver-todas"
      (click)="verTodasSolicitudes()"
    >
      Ver todas las Solicitudes
    </button>

  </div>

</div>