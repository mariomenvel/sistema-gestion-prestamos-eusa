<!-- Pr茅stamos Activos PAS -->
<div class="prestamos-activos">

  <!-- Encabezado -->
  <div class="header">
    <h1 class="page-title">Pr茅stamos Activos</h1>
    <p class="page-subtitle">Listado de todos los pr茅stamos activos pendientes de devoluci贸n</p>
  </div>

  <!-- Tabla de pr茅stamos -->
  <div class="table-container">
    
    <!-- Header de la tabla -->
    <div class="table-header">
      <div class="th th-alumno">Alumno</div>
      <div class="th th-material">Material</div>
      <div class="th th-fecha-prestamo">Fecha Pr茅stamo</div>
      <div class="th th-fecha-devolucion">Fecha Devoluci贸n</div>
      <div class="th th-accion">Acci贸n</div>
    </div>

    <!-- Body de la tabla -->
    <div class="table-body">
      
      <!-- Loading -->
      <div class="empty-state" *ngIf="isLoading">
        <p>Cargando pr茅stamos...</p>
      </div>

      <!-- Error -->
      <div class="empty-state error" *ngIf="errorMessage">
        <p>{{ errorMessage }}</p>
      </div>

      <!-- Sin pr茅stamos -->
      <div class="empty-state" *ngIf="!isLoading && !errorMessage && prestamos.length === 0">
        <p>No hay pr茅stamos activos</p>
      </div>

      <!-- Filas de pr茅stamos -->
      <div 
        class="table-row" 
        *ngFor="let prestamo of prestamos"
        [class.vencido]="esVencido(prestamo)"
      >
        <!-- Columna: Alumno -->
        <div class="td td-alumno">
          {{ getNombreUsuario(prestamo) }}
        </div>

        <!-- Columna: Material -->
        <div class="td td-material">
          {{ getNombreMaterial(prestamo) }}
        </div>

        <!-- Columna: Fecha Pr茅stamo -->
        <div class="td td-fecha-prestamo">
          {{ formatearFecha(prestamo.fecha_inicio) }}
        </div>

        <!-- Columna: Fecha Devoluci贸n -->
        <div class="td td-fecha-devolucion">
          <span class="fecha-wrapper">
            <span 
              class="icono-calendario"
              [class.vencido]="esVencido(prestamo)"
            >
              
            </span>
            {{ formatearFecha(prestamo.fecha_devolucion_prevista) }}
          </span>
        </div>

        <!-- Columna: Acci贸n -->
        <div class="td td-accion">
          <button 
            class="btn-devolucion"
            (click)="registrarDevolucion(prestamo)"
          >
            Registrar Devoluci贸n
          </button>
        </div>

      </div>

    </div>

  </div>

</div>